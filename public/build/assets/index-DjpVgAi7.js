import{G as y,X as S,j as e,x as b,A,r as N}from"./app-BLqjA7mZ.js";import{u as w}from"./useFilter-HuwqhLVC.js";import{A as T}from"./admin-layout-ClGDpCuK.js";import{P as I}from"./page-container-HyVqBcvv.js";import{S as C}from"./separator-BsJkus8V.js";import{T as _,a as P,b as u,c as x,d as M,e as o}from"./table-Bz7reh4z.js";import{D as B,S as L,a as E}from"./data-table-limit-dropdown-CRPxWu5S.js";import{B as H}from"./button-CZsnkR0p.js";import{I as l}from"./icon-DZ5H1KtA.js";import{t as f,g as k}from"./getTimeStamp-BiOIucYJ.js";import{D as F,a as X,b as Y,c as R,d as z,e as v}from"./dropdown-menu-CR3HhC3I.js";import{D as h}from"./dropdown-dialog-C82s_QDY.js";import{D as G}from"./data-table-search-input-DVead7vD.js";import K from"./header-WZ8Hm_bl.js";import"./utils-rgEORciP.js";import"./tooltip-Dw5Dabwf.js";import"./index-CaS6mYJk.js";import"./index-aKqAcbf4.js";import"./index-BUr3ooAS.js";import"./index-B_aThWFx.js";import"./index-C4xQWx_s.js";import"./index-DLMKl4d5.js";import"./index-D8M5jDuV.js";import"./theme-toggle-I1FiAu0B.js";import"./index-BOWu68so.js";import"./react-icons.esm-DmxBueLj.js";import"./index-4k5zxHj6.js";import"./index-Djw9-ARP.js";import"./scroll-area-DiKmIhzG.js";import"./index-D-4a6iE9.js";import"./index-BdQq_4o_.js";import"./select-Ch4saWZb.js";import"./index-D0ftM-Fc.js";import"./createReactComponent-Djspt5ka.js";import"./IconX-BDawAkG1.js";import"./IconPlus-BR_mStXO.js";import"./IconSlash-CQ_UzLeS.js";import"./index-238_fwKS.js";import"./alert-dialog-D8daV4p3.js";import"./input-C3PuPlMz.js";import"./breadcrumbs-DpudZ9ye.js";import"./heading-DfaU3GY0.js";const V=[{label:"name",column:"name"},{label:"status",column:"is_active"},{label:"Tgl. Mulai",column:"start_date"},{label:"Tgl. Selesai",column:"end_date"}],q=({competition:s})=>{var a;const{delete:i}=y(),{auth:c}=S().props,t=(a=c.user)==null?void 0:a.data,r=n=>{i(route("dashboard.superadmin.competitions.destroy",n),{preserveScroll:!0,onSuccess:()=>{f({title:"Perlombaan berhasil dihapus",description:k()})}})},d=n=>{A.patch(route("dashboard.superadmin.competitions.update-status",n),{isActive:!n.isActive},{preserveScroll:!0,onSuccess:()=>{f({title:"Status perlombaan berhasil diperbaharui",description:k()})}})};return e.jsxs(F,{children:[e.jsx(X,{asChild:!0,children:e.jsx(H,{className:"h-7",variant:"outline",size:"icon",children:e.jsx(l,{icon:"IconDots",className:"h-5 w-5 stroke-[1.2]"})})}),e.jsxs(Y,{align:"end",className:"w-56",children:[e.jsx(R,{children:"Actions"}),e.jsx(z,{}),(t==null?void 0:t.role)==="superadmin"&&e.jsxs(e.Fragment,{children:[s.isActive?e.jsxs(h,{description:"Perlombaan yang di-non aktifkan tidak akan muncul di halaman utama pengguna. Apa anda yakin?",action:()=>d(s),submit_text:"Ya, saya yakin!",cancel_text:"Batalkan",buttonStyle:"destructive",children:[e.jsx(l,{icon:"IconX",className:"mr-2"}),"Non Aktifkan"]}):e.jsxs(h,{description:"Perlombaan di aktifkan akan muncul di halaman utama pengguna. Apa anda yakin?",action:()=>d(s),submit_text:"Ya, saya yakin!",cancel_text:"Batalkan",buttonStyle:"destructive",children:[e.jsx(l,{icon:"IconCheck",className:"mr-2"}),"Aktifkan"]}),e.jsxs(h,{description:"Keputusan ini tidak dapat di batalkan. Data perlombaan akan dihapus.",action:()=>r(s),submit_text:"Ya, saya yakin!",cancel_text:"Batalkan",buttonStyle:"destructive",children:[e.jsx(l,{icon:"IconTrash",className:"mr-2"}),"Delete Permanently"]}),e.jsx(v,{children:e.jsxs(b,{href:route("dashboard.superadmin.competitions.edit",s),className:"flex items-center",children:[e.jsx(l,{icon:"IconEdit",className:"mr-2"}),"Perbaharui Data"]})})]}),e.jsx(v,{children:e.jsxs(b,{href:(t==null?void 0:t.role)==="superadmin"?route("dashboard.superadmin.competitions.show",s):route("dashboard.admin.competitions.show",s),className:"flex items-center",children:[e.jsx(l,{icon:"IconEye",className:"mr-2"}),"Lihat Detail"]})})]})]})},J=({competitions:s,meta:i,links:c,params:t,setParams:r,handleSort:d})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"item-center mb-3 flex justify-between",children:[e.jsx(B,{value:t==null?void 0:t.limit,onValueChange:a=>r({...t,limit:a})}),e.jsx(G,{value:t==null?void 0:t.search,onChange:a=>r(n=>({...n,search:a.target.value}))})]}),e.jsx("div",{className:"h-[calc(80vh-220px)] overflow-auto rounded-md border",children:e.jsxs(_,{className:"relative",children:[e.jsx(P,{children:e.jsxs(u,{children:[e.jsx(x,{className:"w-[50px] text-center",children:"#"}),V.map((a,n)=>e.jsx(x,{onClick:()=>d(a.column),children:e.jsx(L,{label:a.label,column:a.column,field:t==null?void 0:t.field,direction:t==null?void 0:t.direction})},n)),e.jsx(x,{})]})}),e.jsx(M,{children:s.length>0?e.jsx(e.Fragment,{children:s.map((a,n)=>e.jsxs(u,{children:[e.jsx(o,{className:"w-0 py-7 text-center",children:i.from+n}),e.jsx(o,{children:a.name}),e.jsx(o,{className:a.isActive?"text-green-400":"text-destructive",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(l,{icon:a.isActive?"IconCheck":"IconX",className:"mr-2"}),a.isActive?"Aktif":"Tidak Aktif "]})}),e.jsx(o,{children:a.startDate}),e.jsx(o,{children:a.endDate}),e.jsx(o,{children:e.jsx(q,{competition:a})})]},a.id))}):e.jsx(u,{children:e.jsx(o,{colSpan:7,className:"animate-pulse py-5 text-center text-base font-semibold text-destructive",children:"Data Tidak Ada."})})})]})}),e.jsx(E,{link:c,meta:i})]}),Ee=s=>{var p;const[i,c]=N.useState(s.state),t=(p=s.auth.user)==null?void 0:p.data,r=(t==null?void 0:t.role)==="superadmin",{data:d,meta:a,links:n}=s.competitions;w({route:r?route("dashboard.superadmin.competitions.index"):route("dashboard.admin.competitions.index"),values:i,only:["competitions"]});const g=j=>{let m=(i==null?void 0:i.direction)??"asc";const D=(i==null?void 0:i.field)??"created_at";j===D&&(m=m==="asc"?"desc":"asc"),c({...i,field:j,direction:m})};return e.jsx(T,{children:e.jsxs(I,{children:[e.jsx(K,{isSuperadmin:r}),e.jsx(C,{}),e.jsx(J,{competitions:d,meta:a,links:n,params:i,setParams:c,handleSort:g})]})})};export{Ee as default};
