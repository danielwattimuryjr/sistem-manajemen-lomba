import{G as y,X as S,j as e,x as b,A,r as N}from"./app-B60EcP0F.js";import{u as w}from"./useFilter-CT87zOXG.js";import{A as T}from"./admin-layout-CEd8-ttv.js";import{P as I}from"./page-container-rlvJWz3i.js";import{S as C}from"./separator-BGMA3rXG.js";import{T as _,a as P,b as u,c as x,d as M,e as o}from"./table-2DwVqcP-.js";import{D as B,S as L,a as E}from"./data-table-limit-dropdown-C5YKKLth.js";import{B as H}from"./button-CSYySzoJ.js";import{I as l}from"./icon-CDAD0Rl-.js";import{t as f,g as k}from"./getTimeStamp-BSXMOBTR.js";import{D as F,a as X,b as Y,c as R,d as z,e as v}from"./dropdown-menu-DvlVD2CP.js";import{D as h}from"./dropdown-dialog-YI1WamAe.js";import{D as G}from"./data-table-search-input-D458gmGi.js";import K from"./header-CN5e83GU.js";import"./utils-3lJgAyb9.js";import"./index-txSIXxnf.js";import"./index-ChQ5FCrs.js";import"./index-DjB6YL3z.js";import"./index-B3xyG9Sm.js";import"./index-BpGVp1RD.js";import"./index-DlFG3IiW.js";import"./react-icons.esm-DX7J3ezY.js";import"./index-BxiXi9wP.js";import"./tooltip-Bw40quRc.js";import"./index-DGcbGRtM.js";import"./index-CRHTDXns.js";import"./theme-toggle-B7BIcAfD.js";import"./index-CzCfGb1c.js";import"./scroll-area-BJ2wO9nW.js";import"./index-Cg1qvr-_.js";import"./index-BdQq_4o_.js";import"./select-BxJ-n3hQ.js";import"./index-ZNZSefJ5.js";import"./createReactComponent-Cs6tuBPI.js";import"./IconX-nwyvps9G.js";import"./IconPlus-CCFgEcR2.js";import"./IconSlash-DmliORvO.js";import"./index-DIer2Liq.js";import"./alert-dialog-CtoRGGks.js";import"./button-Bi5-G8aJ.js";import"./input-D8GnZ1_W.js";import"./breadcrumbs-CwA7-WYV.js";import"./heading-BS4zfkQL.js";const V=[{label:"name",column:"name"},{label:"status",column:"is_active"},{label:"Tgl. Mulai",column:"start_date"},{label:"Tgl. Selesai",column:"end_date"}],q=({competition:i})=>{var a;const{delete:s}=y(),{auth:c}=S().props,t=(a=c.user)==null?void 0:a.data,r=n=>{s(route("dashboard.superadmin.competitions.destroy",n),{preserveScroll:!0,onSuccess:()=>{f({title:"Perlombaan berhasil dihapus",description:k()})}})},d=n=>{A.patch(route("dashboard.superadmin.competitions.update-status",n),{isActive:!n.isActive},{preserveScroll:!0,onSuccess:()=>{f({title:"Status perlombaan berhasil diperbaharui",description:k()})}})};return e.jsxs(F,{children:[e.jsx(X,{asChild:!0,children:e.jsx(H,{className:"h-7",variant:"outline",size:"icon",children:e.jsx(l,{icon:"IconDots",className:"h-5 w-5 stroke-[1.2]"})})}),e.jsxs(Y,{align:"end",className:"w-56",children:[e.jsx(R,{children:"Actions"}),e.jsx(z,{}),(t==null?void 0:t.role)==="superadmin"&&e.jsxs(e.Fragment,{children:[i.isActive?e.jsxs(h,{description:"Perlombaan yang di-non aktifkan tidak akan muncul di halaman utama pengguna. Apa anda yakin?",action:()=>d(i),submit_text:"Ya, saya yakin!",cancel_text:"Batalkan",buttonStyle:"destructive",children:[e.jsx(l,{icon:"IconX",className:"mr-2"}),"Non Aktifkan"]}):e.jsxs(h,{description:"Perlombaan di aktifkan akan muncul di halaman utama pengguna. Apa anda yakin?",action:()=>d(i),submit_text:"Ya, saya yakin!",cancel_text:"Batalkan",buttonStyle:"destructive",children:[e.jsx(l,{icon:"IconCheck",className:"mr-2"}),"Aktifkan"]}),e.jsxs(h,{description:"Keputusan ini tidak dapat di batalkan. Data perlombaan akan dihapus.",action:()=>r(i),submit_text:"Ya, saya yakin!",cancel_text:"Batalkan",buttonStyle:"destructive",children:[e.jsx(l,{icon:"IconTrash",className:"mr-2"}),"Delete Permanently"]}),e.jsx(v,{children:e.jsxs(b,{href:route("dashboard.superadmin.competitions.edit",i),className:"flex items-center",children:[e.jsx(l,{icon:"IconEdit",className:"mr-2"}),"Perbaharui Data"]})})]}),e.jsx(v,{children:e.jsxs(b,{href:(t==null?void 0:t.role)==="superadmin"?route("dashboard.superadmin.competitions.show",i):route("dashboard.admin.competitions.show",i),className:"flex items-center",children:[e.jsx(l,{icon:"IconEye",className:"mr-2"}),"Lihat Detail"]})})]})]})},J=({competitions:i,meta:s,links:c,params:t,setParams:r,handleSort:d})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"item-center mb-3 flex justify-between",children:[e.jsx(B,{value:t==null?void 0:t.limit,onValueChange:a=>r({...t,limit:a})}),e.jsx(G,{value:t==null?void 0:t.search,onChange:a=>r(n=>({...n,search:a.target.value}))})]}),e.jsx("div",{className:"h-[calc(80vh-220px)] overflow-auto rounded-md border",children:e.jsxs(_,{className:"relative",children:[e.jsx(P,{children:e.jsxs(u,{children:[e.jsx(x,{className:"w-[50px] text-center",children:"#"}),V.map((a,n)=>e.jsx(x,{onClick:()=>d(a.column),children:e.jsx(L,{label:a.label,column:a.column,field:t==null?void 0:t.field,direction:t==null?void 0:t.direction})},n)),e.jsx(x,{})]})}),e.jsx(M,{children:i.length>0?e.jsx(e.Fragment,{children:i.map((a,n)=>e.jsxs(u,{children:[e.jsx(o,{className:"w-0 py-7 text-center",children:s.from+n}),e.jsx(o,{children:a.name}),e.jsx(o,{className:a.isActive?"text-green-400":"text-destructive",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(l,{icon:a.isActive?"IconCheck":"IconX",className:"mr-2"}),a.isActive?"Aktif":"Tidak Aktif "]})}),e.jsx(o,{children:a.startDate}),e.jsx(o,{children:a.endDate}),e.jsx(o,{children:e.jsx(q,{competition:a})})]},a.id))}):e.jsx(u,{children:e.jsx(o,{colSpan:7,className:"animate-pulse py-5 text-center text-base font-semibold text-destructive",children:"Data Tidak Ada."})})})]})}),e.jsx(E,{link:c,meta:s})]}),He=i=>{var p;const[s,c]=N.useState(i.state),t=(p=i.auth.user)==null?void 0:p.data,r=(t==null?void 0:t.role)==="superadmin",{data:d,meta:a,links:n}=i.competitions;w({route:r?route("dashboard.superadmin.competitions.index"):route("dashboard.admin.competitions.index"),values:s,only:["competitions"]});const g=j=>{let m=(s==null?void 0:s.direction)??"asc";const D=(s==null?void 0:s.field)??"created_at";j===D&&(m=m==="asc"?"desc":"asc"),c({...s,field:j,direction:m})};return e.jsx(T,{children:e.jsxs(I,{children:[e.jsx(K,{isSuperadmin:r}),e.jsx(C,{}),e.jsx(J,{competitions:d,meta:a,links:n,params:s,setParams:c,handleSort:g})]})})};export{He as default};
