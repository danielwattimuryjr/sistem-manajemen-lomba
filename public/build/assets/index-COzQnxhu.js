import{r as l,j as e,X as M,G as O,e as q}from"./app-B60EcP0F.js";import{T as z,a as K,b as I,c as N,d as X,e as h}from"./table-2DwVqcP-.js";import{B as G,I as $}from"./button-tooltip-Ct4-Xwcc.js";import{D as J,S as Q,a as W}from"./data-table-limit-dropdown-C5YKKLth.js";import Y from"./columns-DXvPyM85.js";import Z from"./cell-action-CFlEvQ4D.js";import{u as ee}from"./index-DjB6YL3z.js";import{c as te,b as R,P as oe}from"./index-ChQ5FCrs.js";import{u as re}from"./index-B3xyG9Sm.js";import{u as se}from"./index-ZNZSefJ5.js";import{u as ie}from"./index-DGcbGRtM.js";import{P as B}from"./index-DlFG3IiW.js";import{c as T}from"./utils-3lJgAyb9.js";import{d as ne}from"./react-icons.esm-DX7J3ezY.js";import{u as ce}from"./useFilter-CT87zOXG.js";import{I as ae,a as _}from"./icon-CDAD0Rl-.js";import{t as D,g as A}from"./getTimeStamp-BSXMOBTR.js";import"./button-CSYySzoJ.js";import"./index-BxiXi9wP.js";import"./tooltip-Bw40quRc.js";import"./index-BpGVp1RD.js";import"./index-CRHTDXns.js";import"./select-BxJ-n3hQ.js";import"./index-BdQq_4o_.js";import"./index-CzCfGb1c.js";import"./index-Cg1qvr-_.js";import"./index-txSIXxnf.js";import"./dropdown-menu-DvlVD2CP.js";import"./index-DIer2Liq.js";import"./dropdown-dialog-YI1WamAe.js";import"./alert-dialog-CtoRGGks.js";import"./button-Bi5-G8aJ.js";import"./createReactComponent-Cs6tuBPI.js";import"./IconX-nwyvps9G.js";import"./IconPlus-CCFgEcR2.js";import"./IconSlash-DmliORvO.js";var P="Checkbox",[de,Qe]=te(P),[le,ue]=de(P),V=l.forwardRef((s,o)=>{const{__scopeCheckbox:i,name:f,checked:m,defaultChecked:c,required:b,disabled:a,value:j="on",onCheckedChange:v,form:x,...g}=s,[u,k]=l.useState(null),C=ee(o,d=>k(d)),y=l.useRef(!1),t=u?x||!!u.closest("form"):!0,[r=!1,n]=re({prop:m,defaultProp:c,onChange:v}),E=l.useRef(r);return l.useEffect(()=>{const d=u==null?void 0:u.form;if(d){const w=()=>n(E.current);return d.addEventListener("reset",w),()=>d.removeEventListener("reset",w)}},[u,n]),e.jsxs(le,{scope:i,state:r,disabled:a,children:[e.jsx(B.button,{type:"button",role:"checkbox","aria-checked":p(r)?"mixed":r,"aria-required":b,"data-state":F(r),"data-disabled":a?"":void 0,disabled:a,value:j,...g,ref:C,onKeyDown:R(s.onKeyDown,d=>{d.key==="Enter"&&d.preventDefault()}),onClick:R(s.onClick,d=>{n(w=>p(w)?!0:!w),t&&(y.current=d.isPropagationStopped(),y.current||d.stopPropagation())})}),t&&e.jsx(he,{control:u,bubbles:!y.current,name:f,value:j,checked:r,required:b,disabled:a,form:x,style:{transform:"translateX(-100%)"},defaultChecked:p(c)?!1:c})]})});V.displayName=P;var H="CheckboxIndicator",U=l.forwardRef((s,o)=>{const{__scopeCheckbox:i,forceMount:f,...m}=s,c=ue(H,i);return e.jsx(oe,{present:f||p(c.state)||c.state===!0,children:e.jsx(B.span,{"data-state":F(c.state),"data-disabled":c.disabled?"":void 0,...m,ref:o,style:{pointerEvents:"none",...s.style}})})});U.displayName=H;var he=s=>{const{control:o,checked:i,bubbles:f=!0,defaultChecked:m,...c}=s,b=l.useRef(null),a=se(i),j=ie(o);l.useEffect(()=>{const x=b.current,g=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(g,"checked").set;if(a!==i&&k){const C=new Event("click",{bubbles:f});x.indeterminate=p(i),k.call(x,p(i)?!1:i),x.dispatchEvent(C)}},[a,i,f]);const v=l.useRef(p(i)?!1:i);return e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:m??v.current,...c,tabIndex:-1,ref:b,style:{...s.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function p(s){return s==="indeterminate"}function F(s){return p(s)?"indeterminate":s?"checked":"unchecked"}var L=V,fe=U;const S=l.forwardRef(({className:s,...o},i)=>e.jsx(L,{ref:i,className:T("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...o,children:e.jsx(fe,{className:T("flex items-center justify-center text-current"),children:e.jsx(ne,{className:"h-4 w-4"})})}));S.displayName=L.displayName;const We=({selectedRole:s,params:o,setParams:i})=>{const{users:f}=M().props,{data:m,setData:c,patch:b,reset:a}=O({user_id:[]});ce({route:route("dashboard.superadmin.users.index"),values:o,only:["users"]}),l.useEffect(()=>{a()},[s]);function j(t){let r=(o==null?void 0:o.direction)??"asc";const n=(o==null?void 0:o.field)??"created_at";t===n&&(r=r==="asc"?"desc":"asc"),i({...o,field:t,direction:r})}function v(t,r){c(r?n=>({...n,user_id:[...n.user_id,t]}):n=>({...n,user_id:n.user_id.filter(E=>E!==t)}))}function x(t){return m.user_id.includes(t)}function g(t){t?q.post(route("dashboard.superadmin.users.ids"),{role:s}).then(r=>{c("user_id",r.data);const n=r.data;console.log("requested",n)}).catch(r=>{console.error("Error fetching user IDs:",r)}):a()}function u(){b(route("dashboard.superadmin.users.bulk-verify"),{onSuccess:()=>{D({title:"Status user telah diperbaharui",description:A()}),a()},onError:()=>{D({title:"Terjadi kesalahan saat memperbaharui status user",description:A()})}})}const{data:k,meta:C,links:y}=f;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-row gap-x-2",children:[e.jsx(J,{value:o==null?void 0:o.limit,onValueChange:t=>i({...o,limit:t})}),e.jsx(G,{tooltip:"Verifikasi Pengguna",disabled:m.user_id.length===0,size:"icon",onClick:u,children:e.jsx(ae,{icon:"IconRosetteDiscountCheck"})})]}),e.jsx("div",{className:"w-72",children:e.jsx($,{type:"text",value:o==null?void 0:o.search,onChange:t=>i(r=>({...r,search:t.target.value})),placeholder:"Pencarian..."})})]}),e.jsx("div",{className:"h-[calc(80vh-220px)] overflow-auto rounded-md border",children:e.jsxs(z,{className:"relative",children:[e.jsx(K,{children:e.jsxs(I,{children:[e.jsx(N,{children:e.jsx(S,{onCheckedChange:t=>g(t)})}),e.jsx(N,{className:"w-[50px] text-center",children:"#"}),Y.map((t,r)=>e.jsx(N,{onClick:()=>j(t.column),children:e.jsx(Q,{label:t.label,column:t.column,field:o==null?void 0:o.field,direction:o==null?void 0:o.direction})},r)),e.jsx(N,{})]})}),e.jsx(X,{children:k.length>0?e.jsx(e.Fragment,{children:k.map((t,r)=>e.jsxs(I,{children:[e.jsx(h,{children:e.jsx(S,{checked:x(t.id),onCheckedChange:n=>v(t.id,n),disabled:t.accountVerified})}),e.jsx(h,{className:"w-0 py-7 text-center",children:C.from+r}),e.jsxs(h,{children:[t.name,e.jsx("div",{className:"text-muted-foreground",children:t.email})]}),e.jsx(h,{children:t.emailVerified&&e.jsx(_,{className:"m-auto h-8 w-8 text-green-300"})}),e.jsx(h,{children:t.accountVerified&&e.jsx(_,{className:"m-auto h-8 w-8 text-green-300"})}),e.jsx(h,{children:t.createdAt}),e.jsx(h,{children:t.updatedAt}),e.jsx(h,{children:e.jsx(Z,{user:t})})]},t.id))}):e.jsx(I,{children:e.jsx(h,{colSpan:7,className:"animate-pulse py-5 text-center text-base font-semibold text-destructive",children:"Data Tidak Ada."})})})]})}),e.jsx(W,{links:y,meta:C})]})};export{We as default};
