import{G as y,X as S,j as e,x as b,A,r as N}from"./app-DpEa6Rf_.js";import{u as w}from"./useFilter-BWsRbSsP.js";import{A as T}from"./admin-layout-BFwsg0ho.js";import{P as I}from"./toaster-DsGDxpNV.js";import{S as C}from"./separator-CATmoege.js";import{T as _,a as P,b as u,c as x,d as M,e as o}from"./table-D45WKWGM.js";import{D as B,S as L,a as E}from"./data-table-limit-dropdown-CQUZ5EhM.js";import{B as H}from"./button-31hOb7zH.js";import{a as l}from"./icon-C28CBXB_.js";import{t as f,g as k}from"./getTimeStamp-D1sRjZWW.js";import{D as F,a as X,b as Y,c as R,d as z,e as v}from"./dropdown-menu-BY6MWmX1.js";import{D as h}from"./dropdown-dialog-DjOIS-W2.js";import{D as G}from"./data-table-search-input-C8sh5O8J.js";import K from"./header-A9TxnkKn.js";import"./utils-S9NV2AZE.js";import"./index-D14Z8mzc.js";import"./index-D4Pui9mU.js";import"./index-xyiFk2wD.js";import"./index-5ZMHX0MN.js";import"./index--C4u84Ed.js";import"./index-DyUOoml4.js";import"./react-icons.esm-B6unJ9KK.js";import"./index-crENPLr2.js";import"./tooltip-RQsjLXiz.js";import"./index-BDnPpse6.js";import"./index-ChyvvWOb.js";import"./theme-toggle-x_eIP7Zq.js";import"./scroll-area-B8Vg6tbP.js";import"./index-DcWR1KiJ.js";import"./index-BdQq_4o_.js";import"./index-ClPDHDrD.js";import"./select-DYB48uXX.js";import"./index--WsUT6NN.js";import"./createReactComponent-6wwH-MRe.js";import"./IconX-B9wp1jA3.js";import"./IconPlus-BkW2GP50.js";import"./IconSlash-C7wowQNZ.js";import"./index-DZdkg8JF.js";import"./alert-dialog-Cj7XY5GU.js";import"./button-FZYSbUv2.js";import"./input-Ccm4_eHP.js";import"./breadcrumbs-DQcGFhji.js";import"./heading-DFeRE5AC.js";const V=[{label:"name",column:"name"},{label:"status",column:"is_active"},{label:"Tgl. Mulai",column:"start_date"},{label:"Tgl. Selesai",column:"end_date"}],q=({competition:i})=>{var a;const{delete:s}=y(),{auth:c}=S().props,t=(a=c.user)==null?void 0:a.data,r=n=>{s(route("dashboard.superadmin.competitions.destroy",n),{preserveScroll:!0,onSuccess:()=>{f({title:"Perlombaan berhasil dihapus",description:k()})}})},d=n=>{A.patch(route("dashboard.superadmin.competitions.update-status",n),{isActive:!n.isActive},{preserveScroll:!0,onSuccess:()=>{f({title:"Status perlombaan berhasil diperbaharui",description:k()})}})};return e.jsxs(F,{children:[e.jsx(X,{asChild:!0,children:e.jsx(H,{className:"h-7",variant:"outline",size:"icon",children:e.jsx(l,{icon:"IconDots",className:"h-5 w-5 stroke-[1.2]"})})}),e.jsxs(Y,{align:"end",className:"w-56",children:[e.jsx(R,{children:"Actions"}),e.jsx(z,{}),(t==null?void 0:t.role)==="superadmin"&&e.jsxs(e.Fragment,{children:[i.isActive?e.jsxs(h,{description:"Perlombaan yang di-non aktifkan tidak akan muncul di halaman utama pengguna. Apa anda yakin?",action:()=>d(i),submit_text:"Ya, saya yakin!",cancel_text:"Batalkan",buttonStyle:"destructive",children:[e.jsx(l,{icon:"IconX",className:"mr-2"}),"Non Aktifkan"]}):e.jsxs(h,{description:"Perlombaan di aktifkan akan muncul di halaman utama pengguna. Apa anda yakin?",action:()=>d(i),submit_text:"Ya, saya yakin!",cancel_text:"Batalkan",buttonStyle:"destructive",children:[e.jsx(l,{icon:"IconCheck",className:"mr-2"}),"Aktifkan"]}),e.jsxs(h,{description:"Keputusan ini tidak dapat di batalkan. Data perlombaan akan dihapus.",action:()=>r(i),submit_text:"Ya, saya yakin!",cancel_text:"Batalkan",buttonStyle:"destructive",children:[e.jsx(l,{icon:"IconTrash",className:"mr-2"}),"Delete Permanently"]}),e.jsx(v,{children:e.jsxs(b,{href:route("dashboard.superadmin.competitions.edit",i),className:"flex items-center",children:[e.jsx(l,{icon:"IconEdit",className:"mr-2"}),"Perbaharui Data"]})})]}),e.jsx(v,{children:e.jsxs(b,{href:(t==null?void 0:t.role)==="superadmin"?route("dashboard.superadmin.competitions.show",i):route("dashboard.admin.competitions.show",i),className:"flex items-center",children:[e.jsx(l,{icon:"IconEye",className:"mr-2"}),"Lihat Detail"]})})]})]})},J=({competitions:i,meta:s,links:c,params:t,setParams:r,handleSort:d})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"item-center mb-3 flex justify-between",children:[e.jsx(B,{value:t==null?void 0:t.limit,onValueChange:a=>r({...t,limit:a})}),e.jsx(G,{value:t==null?void 0:t.search,onChange:a=>r(n=>({...n,search:a.target.value}))})]}),e.jsx("div",{className:"h-[calc(80vh-220px)] overflow-auto rounded-md border",children:e.jsxs(_,{className:"relative",children:[e.jsx(P,{children:e.jsxs(u,{children:[e.jsx(x,{className:"w-[50px] text-center",children:"#"}),V.map((a,n)=>e.jsx(x,{onClick:()=>d(a.column),children:e.jsx(L,{label:a.label,column:a.column,field:t==null?void 0:t.field,direction:t==null?void 0:t.direction})},n)),e.jsx(x,{})]})}),e.jsx(M,{children:i.length>0?e.jsx(e.Fragment,{children:i.map((a,n)=>e.jsxs(u,{children:[e.jsx(o,{className:"w-0 py-7 text-center",children:s.from+n}),e.jsx(o,{children:a.name}),e.jsx(o,{className:a.isActive?"text-green-400":"text-destructive",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(l,{icon:a.isActive?"IconCheck":"IconX",className:"mr-2"}),a.isActive?"Aktif":"Tidak Aktif "]})}),e.jsx(o,{children:a.startDate}),e.jsx(o,{children:a.endDate}),e.jsx(o,{children:e.jsx(q,{competition:a})})]},a.id))}):e.jsx(u,{children:e.jsx(o,{colSpan:7,className:"animate-pulse py-5 text-center text-base font-semibold text-destructive",children:"Data Tidak Ada."})})})]})}),e.jsx(E,{link:c,meta:s})]}),He=i=>{var p;const[s,c]=N.useState(i.state),t=(p=i.auth.user)==null?void 0:p.data,r=(t==null?void 0:t.role)==="superadmin",{data:d,meta:a,links:n}=i.competitions;w({route:r?route("dashboard.superadmin.competitions.index"):route("dashboard.admin.competitions.index"),values:s,only:["competitions"]});const g=j=>{let m=(s==null?void 0:s.direction)??"asc";const D=(s==null?void 0:s.field)??"created_at";j===D&&(m=m==="asc"?"desc":"asc"),c({...s,field:j,direction:m})};return e.jsx(T,{children:e.jsxs(I,{children:[e.jsx(K,{isSuperadmin:r}),e.jsx(C,{}),e.jsx(J,{competitions:d,meta:a,links:n,params:s,setParams:c,handleSort:g})]})})};export{He as default};
